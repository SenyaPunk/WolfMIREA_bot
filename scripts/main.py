import os
import asyncio
import time
import json
from telethon import TelegramClient, events
from telethon.sessions import StringSession
from typing import Dict, Optional

API_ID = 23651537
API_HASH = '9b6eb8e2dc96f17e0bc724668ed5f56d'
STRING_SESSION = os.getenv('TELEGRAM_STRING_SESSION', None)
DEVICE_MODEL = 'Samsung Galaxy S23'
SYSTEM_VERSION = 'Android 13'
APP_VERSION = '9.5.0'

BIRTHDAY_COOLDOWN = 5400  # 1.5 —á–∞—Å–∞ (90 –º–∏–Ω—É—Ç)
COOLDOWNS_FILE = 'birthday_cooldowns.json'

BIRTHDAY_GIRL_ID = 1184578059  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID –∞–∫–∫–∞—É–Ω—Ç–∞ –ñ–∞–Ω–Ω–µ—Ç
birthday_girl_used = False  # –§–ª–∞–≥, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –ª–∏ –∏–º–µ–Ω–∏–Ω–Ω–∏—Ü–∞ –∫–æ–º–∞–Ω–¥—É

BIRTHDAY_SLIDES = [
    "ü§ç\n\
ü§ç\n\
ü§ç",
    
    "ü§çü§ç\n\
ü§çü§ç\n\
ü§çü§ç\n\
ü§çü§ç",
    
    "ü§çü§çü§ç\n\
ü§çü§çü§ç\n\
ü§çü§çü§ç\n\
ü§çü§çü§ç\n\
ü§çü§çü§ç",
    
    "ü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§ç",
    
    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",
    
    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çüíñü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çü§çüíñüíñüíñü§çü§ç\n\
ü§çü§çü§çüíñü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çü§çüíñüíñüíñü§çü§ç\n\
ü§çü§çü§çüíñü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çü§çüíñüíñüíñü§çü§ç\n\
ü§çü§çü§çüíñü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çü§çüíñüíñüíñü§çü§ç\n\
ü§çü§çü§çüíñü§çü§çü§ç",

    "ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çü§çüíñüíñüíñü§çü§ç",

    "ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç",

    "ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç",

    "ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç",

    "ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíïü§çü§çü§çüíïü§ç\n\
ü§çüíïü§çü§çü§çüíïü§ç\n\
ü§çüíïü§çü§çü§çüíïü§ç\n\
ü§çüíïüíïüíïüíïüíïü§ç\n\
ü§çüíïü§çü§çü§çüíïü§ç\n\
ü§çüíïü§çü§çü§çüíïü§ç\n\
ü§çüíïü§çü§çü§çüíïü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çüíóüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíñüíñüíñü§çü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çüíñü§çü§çü§çü§çü§ç\n\
ü§çüíñü§çü§çü§çü§çü§ç\n\
ü§çüíñü§çü§çü§çü§çü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çü§çüíñüíñüíñü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíñüíñüíñü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çü§çüíñü§çüíñü§çü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çüíñü§çü§çü§çü§çü§ç\n\
ü§çüíñü§çü§çü§çü§çü§ç\n\
ü§çüíñüíñüíñüíñü§çü§ç\n\
ü§çüíñü§çü§çü§çü§çü§ç\n\
ü§çüíñü§çü§çü§çü§çü§ç\n\
ü§çüíñüíñüíñüíñüíñü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çüíñüíñü§çüíñüíñü§ç\n\
ü§çüíñü§çüíñü§çüíñü§ç\n\
ü§çüíñü§çüíñü§çüíñü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çüíñü§çü§çü§çüíñü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíóüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çüíóüíóüíóüíóü§çü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çü§çü§çü§çü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çüíóüíóü§ç\n\
ü§çüíóü§çü§çüíóüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóü§çüíóü§çüíóü§ç\n\
ü§çüíóüíóü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíóüíóüíóüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çü§çüíóüíóüíóüíóü§ç\n\
ü§çü§çü§çüíóü§çüíóü§ç\n\
ü§çü§çüíóü§çü§çüíóü§ç\n\
ü§çüíóü§çü§çü§çüíóü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çü§çü§çüíóüíóü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çü§çü§çüíóüíóü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çüíñü§çü§çü§çüíñü§ç\n\
üíñüíïüíïüíïüíïüíïüíñ\n\
üíïüíïüíóüíïüíóüíïüíï\n\
üíïüíóüíóüíóüíóüíóüíï\n\
üíïüíóüíóüíóüíóüíóüíï\n\
üíïüíïüíóüíóüíóüíïüíï\n\
üíñüíïüíïüíóüíïüíïüíñ\n\
ü§çüíñüíïüíïüíïüíñü§ç\n\
ü§çü§çüíñüíïüíñü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çüíïüíïüíïüíïüíïü§ç\n\
üíïüíïüíóüíïüíóüíïüíï\n\
üíïüíóüíóüíóüíóüíóüíï\n\
üíïüíóüíóüíóüíóüíóüíï\n\
üíïüíïüíóüíóüíóüíïüíï\n\
ü§çüíïüíïüíóüíïüíïü§ç\n\
ü§çü§çüíïüíïüíïü§çü§ç\n\
ü§çü§çü§çüíïü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çüíóüíóüíóüíóüíóü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çüíóü§çüíóü§çü§ç\n\
ü§çü§çüíóüíóüíóü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çüíóü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç\n\
ü§çü§çü§çü§çü§çü§çü§ç",

    "ü§çü§çü§çü§çü§çü§çü§ç",

    "–ñ",
    "–ñ–∞",
    "–ñ–∞–Ω",
    "–ñ–∞–Ω–Ω",
    "–ñ–∞–Ω–Ω–µ", 
    "–ñ–∞–Ω–Ω–µ—Ç, ", 
    "–ñ–∞–Ω–Ω–µ—Ç, –ø",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂", 
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è!",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú",   
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã",  
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ",  
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±—è",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±—è –ª",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±—è –ª—é",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±—è –ª—é–±",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±—è –ª—é–±–∏",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±—è –ª—é–±–∏–º",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±—è –ª—é–±–∏–º ‚ù§Ô∏è",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±—è –ª—é–±–∏–º ‚ù§Ô∏è‚ù§Ô∏è",
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±—è –ª—é–±–∏–º ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è",    
    "–ñ–∞–Ω–Ω–µ—Ç, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! –ú—ã —Ç–µ–±—è –ª—é–±–∏–º ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è",    
]

session = StringSession(STRING_SESSION) if STRING_SESSION else 'birthday_userbot'
client = TelegramClient(
    session,
    API_ID,
    API_HASH,
    device_model=DEVICE_MODEL,
    system_version=SYSTEM_VERSION,
    app_version=APP_VERSION
)

def load_cooldowns() -> Dict:
    """–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫—É–ª–¥–∞—É–Ω—ã –∏–∑ —Ñ–∞–π–ª–∞"""
    try:
        with open(COOLDOWNS_FILE, 'r', encoding='utf-8') as f:
            return json.load(f)
    except (FileNotFoundError, json.JSONDecodeError):
        return {}

def save_cooldowns(cooldowns: Dict) -> None:
    """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫—É–ª–¥–∞—É–Ω—ã –≤ —Ñ–∞–π–ª"""
    try:
        with open(COOLDOWNS_FILE, 'w', encoding='utf-8') as f:
            json.dump(cooldowns, f, ensure_ascii=False, indent=2)
    except Exception as e:
        print(f"Failed to save cooldowns: {e}")

def get_birthday_cooldown_key(user_id: int, chat_id: int) -> str:
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª—é—á –¥–ª—è –∫—É–ª–¥–∞—É–Ω–∞ –∫–æ–º–∞–Ω–¥—ã –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è"""
    return f"birthday_{user_id}_{chat_id}"

def check_birthday_cooldown(user_id: int, chat_id: int) -> Optional[float]:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—É–ª–¥–∞—É–Ω –∫–æ–º–∞–Ω–¥—ã –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è"""
    cooldowns = load_cooldowns()
    key = get_birthday_cooldown_key(user_id, chat_id)
    
    if key not in cooldowns:
        return None
    
    last_birthday = cooldowns[key].get("last_use", 0)
    current_time = time.time()
    time_passed = current_time - last_birthday
    
    if time_passed >= BIRTHDAY_COOLDOWN:
        return None
    
    return BIRTHDAY_COOLDOWN - time_passed

def set_birthday_cooldown(user_id: int, chat_id: int) -> None:
    """–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫—É–ª–¥–∞—É–Ω –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è"""
    cooldowns = load_cooldowns()
    key = get_birthday_cooldown_key(user_id, chat_id)
    
    if key not in cooldowns:
        cooldowns[key] = {}
    
    cooldowns[key]["last_use"] = time.time()
    save_cooldowns(cooldowns)

def format_time_remaining(seconds: float) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –∫—É–ª–¥–∞—É–Ω–∞"""
    hours = int(seconds // 3600)
    minutes = int((seconds % 3600) // 60)
    
    if hours > 0:
        return f"{hours} —á. {minutes} –º–∏–Ω."
    elif minutes > 0:
        return f"{minutes} –º–∏–Ω."
    else:
        return f"{int(seconds)} —Å–µ–∫."

@client.on(events.NewMessage)
async def birthday_handler(event):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏—è "—Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è –º–µ–Ω—è" - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω—É–∂–Ω—ã–π —Ç–µ–∫—Å—Ç (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ)
    if not event.message.text or "—Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è –º–µ–Ω—è" not in event.message.text.lower():
        return
    
    user_id = event.sender_id
    chat_id = event.chat_id
    
    global birthday_girl_used
    if not birthday_girl_used and user_id != BIRTHDAY_GIRL_ID:
        # –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        try:
            await event.delete()
        except Exception as e:
            print(f"Failed to delete user message: {e}")
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
        error_msg = await client.send_message(
            chat_id,
            "‚ùå **–í—ã –Ω–µ –ñ–∞–Ω–Ω–µ—Ç!**\n\n"
            "üéÇ –°–Ω–∞—á–∞–ª–∞ –∏–º–µ–Ω–∏–Ω–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É!"
        )
        
        # –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        await asyncio.sleep(5)
        try:
            await error_msg.delete()
        except Exception as e:
            print(f"Failed to delete error message: {e}")
        return
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—É–ª–¥–∞—É–Ω
    remaining_time = check_birthday_cooldown(user_id, chat_id)
    if remaining_time is not None:
        # –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        try:
            await event.delete()
        except Exception as e:
            print(f"Failed to delete user message: {e}")
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∫—É–ª–¥–∞—É–Ω–µ
        warning_msg = await client.send_message(
            chat_id,
            f"üéÇ **–ß—É—Ç—å-—á—É—Ç—å –Ω–∞–¥–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å=)**\n\n"
            f"‚è∞ –°–ª–µ–¥—É—é—â–µ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ {format_time_remaining(remaining_time)}\n"
        )
        
        # –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        await asyncio.sleep(5)
        try:
            await warning_msg.delete()
        except Exception as e:
            print(f"Failed to delete warning message: {e}")
        return
    
    # –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    try:
        await event.delete()
    except Exception as e:
        print(f"Failed to delete user message: {e}")
    
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É–ª–¥–∞—É–Ω
    set_birthday_cooldown(user_id, chat_id)
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–µ—Ä–≤—ã–π —Å–ª–∞–π–¥
    birthday_msg = await client.send_message(chat_id, BIRTHDAY_SLIDES[0])
    
    start_time = time.time()
    animation_duration = 120  # 1 –º–∏–Ω—É—Ç–∞
    slide_delay = 0.5  # –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Å–ª–∞–π–¥–∞–º–∏ (—É–≤–µ–ª–∏—á–µ–Ω–∞ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è flood control)
    current_slide = 0
    
    while time.time() - start_time < animation_duration:
        await asyncio.sleep(slide_delay)
        
        # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–∞–π–¥—É (–∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ - —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ)
        current_slide = (current_slide + 1) % (len(BIRTHDAY_SLIDES) - 1)
        
        try:
            await birthday_msg.edit(BIRTHDAY_SLIDES[current_slide])
        except Exception as e:
            if "429" in str(e):  # Too Many Requests
                print(f"Rate limit hit, waiting...")
                await asyncio.sleep(5)
                try:
                    await birthday_msg.edit(BIRTHDAY_SLIDES[current_slide])
                except Exception as retry_e:
                    print(f"Failed to edit birthday message after retry: {retry_e}")
                    break
            else:
                print(f"Failed to edit birthday message: {e}")
                break
    
    try:
        await birthday_msg.edit(BIRTHDAY_SLIDES[-1])
    except Exception as e:
        print(f"Failed to set final birthday message: {e}")
    
    if user_id == BIRTHDAY_GIRL_ID:
        birthday_girl_used = True
        print(f"Birthday girl used the command, now everyone can use it!")
    
    print(f"Birthday animation completed for user {user_id} in chat {chat_id}")

async def main():
    await client.start()
    print('üéÇ Birthday UserBot –∑–∞–ø—É—â–µ–Ω!')
    print('üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: Samsung Galaxy S23')
    print('ü§ñ –ö–æ–º–∞–Ω–¥–∞: "—Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è –º–µ–Ω—è" - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è')
    print('‚è∞ –ö—É–ª–¥–∞—É–Ω: 1.5 —á–∞—Å–∞')
    
    # –û–∂–∏–¥–∞–µ–º —Å–æ–±—ã—Ç–∏—è
    await client.run_until_disconnected()

if __name__ == '__main__':
    client.loop.run_until_complete(main())
